# Rendu TP 1

## I. Gather information

La commande `ip a` permet de récupérer une liste des cartes réseau avec leur nom, leur IP et leur adresse MAC.  
Par exemple voici ci-dessous une partie du résultat que j'ai eu. On y retrouve le nom `enp0s8`, l'ip `192.168.219.8` et l'adresse mac `fe80::b805:9043:e527:9e57`.  

    3: enp0s8: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000                                     link/ether 08:00:27:16:68:b3 brd ff:ff:ff:ff:ff:ff                                                                                    inet 192.168.219.8/24 brd 192.168.219.255 scope global dynamic noprefixroute enp0s8                                                      valid_lft 1100sec preferred_lft 1100sec                                                                                            inet6 fe80::b805:9043:e527:9e57/64 scope link noprefixroute                                                                              valid_lft forever preferred_lft forever  


Les cartes réseaux ont bien récupéré une IP en DHCP.  
Pour enp0s3 j'utilise `cat /etc/sysconfig/network-scripts/ifcfg-enp0s3` et je vois dans le résultat `BOOTPROTO="dhcp"` qui me montre bien que l'adresse a été récupéré en dhcp.  
Voici le bail DHCP utilisé:  

    DHCP4.OPTION[1]:                        domain_name = auvence.co                                                                        DHCP4.OPTION[2]:                        domain_name_servers = 10.33.10.20 10.33.10.2 8.8.8.8 8.8.4.4                                    DHCP4.OPTION[3]:                        expiry = 1569593431                                                                             DHCP4.OPTION[4]:                        ip_address = 10.0.2.15                                                                          DHCP4.OPTION[5]:                        requested_broadcast_address = 1                                                                 DHCP4.OPTION[6]:                        requested_dhcp_server_identifier = 1                                                            DHCP4.OPTION[7]:                        requested_domain_name = 1                                                                       DHCP4.OPTION[8]:                        requested_domain_name_servers = 1                                                               DHCP4.OPTION[9]:                        requested_domain_search = 1                                                                     DHCP4.OPTION[10]:                       requested_host_name = 1                                                                         DHCP4.OPTION[11]:                       requested_interface_mtu = 1                                                                     DHCP4.OPTION[12]:                       requested_ms_classless_static_routes = 1                                                        DHCP4.OPTION[13]:                       requested_nis_domain = 1                                                                        DHCP4.OPTION[14]:                       requested_nis_servers = 1                                                                       DHCP4.OPTION[15]:                       requested_ntp_servers = 1                                                                       DHCP4.OPTION[16]:                       requested_rfc3442_classless_static_routes = 1                                                   DHCP4.OPTION[17]:                       requested_routers = 1                                                                           DHCP4.OPTION[18]:                       requested_static_routes = 1                                                                     DHCP4.OPTION[19]:                       requested_subnet_mask = 1                                                                       DHCP4.OPTION[20]:                       requested_time_offset = 1                                                                       DHCP4.OPTION[21]:                       requested_wpad = 1                                                                              DHCP4.OPTION[22]:                       routers = 10.0.2.2                                                                              DHCP4.OPTION[23]:                       subnet_mask = 255.255.255.0                    


Pour enp0s8. Le fichier n'existe pas. Je le créé donc avec `sudo nano /etc/sysconfig/network-scripts/ifcfg-enp0s8` puis je fais `sudo nmcli conn reload` suivi de `sudo nmcli conn up enp0s8` pour dire à centos que j'ai modifié le fichier de config. Je peux maintenant récupérer le bail DHCP:  

    DHCP4.OPTION[1]:                        expiry = 1569512143                                                                             DHCP4.OPTION[2]:                        ip_address = 192.168.219.8                                                                      DHCP4.OPTION[3]:                        requested_broadcast_address = 1                                                                 DHCP4.OPTION[4]:                        requested_dhcp_server_identifier = 1                                                            DHCP4.OPTION[5]:                        requested_domain_name = 1                                                                       DHCP4.OPTION[6]:                        requested_domain_name_servers = 1                                                               DHCP4.OPTION[7]:                        requested_domain_search = 1                                                                     DHCP4.OPTION[8]:                        requested_host_name = 1                                                                         DHCP4.OPTION[9]:                        requested_interface_mtu = 1                                                                     DHCP4.OPTION[10]:                       requested_ms_classless_static_routes = 1                                                        DHCP4.OPTION[11]:                       requested_nis_domain = 1                                                                        DHCP4.OPTION[12]:                       requested_nis_servers = 1                                                                       DHCP4.OPTION[13]:                       requested_ntp_servers = 1                                                                       DHCP4.OPTION[14]:                       requested_rfc3442_classless_static_routes = 1                                                   DHCP4.OPTION[15]:                       requested_routers = 1                                                                           DHCP4.OPTION[16]:                       requested_static_routes = 1                                                                     DHCP4.OPTION[17]:                       requested_subnet_mask = 1                                                                       DHCP4.OPTION[18]:                       requested_time_offset = 1                                                                       DHCP4.OPTION[19]:                       requested_wpad = 1                                                                              DHCP4.OPTION[20]:                       subnet_mask = 255.255.255.0                

Pour afficher la table de routahe je fais `ìp route`:

    [centos8@localhost /]$ ip route                                                                                                         default via 10.0.2.2 dev enp0s3 proto dhcp metric 100                                                                                   10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.15 metric 100                                                                 192.168.219.0/24 dev enp0s8 proto kernel scope link src 192.168.219.8 metric 101 

Ces lignes montrent tout simplement les routes à prendre lors de l'utilisation de ces ip.

Pour afficher la table de routahe je fais `arp -a`:

    ? (192.168.219.1) at 0a:00:27:00:00:1b [ether] on enp0s8
    _gateway (10.0.2.2) at 52:54:00:12:35:02 [ether] on enp0s3
    ? (192.168.219.2) at 08:00:27:a0:04:e2 [ether] on enp0s8

Ces lignes montrent tout simplement à quelle adresse mac appartient chaque ip.